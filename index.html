<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3 Dados e Teste</title>
  <style>
    body {
      margin: 20px;
      padding: 0px;
      background-color: black;
      color: black;
      font-family: Arial, sans-serif;
      font-size: 12px;
      text-align: top;
    }
    div.container {
      background-color: white;
      border-radius: 15px;

      display: flex;
    }
    div.containerEsquerdo {
      margin: 10px;
      margin-right: 5px;
      padding: 10px;
      width: 340px;
      display: inline-block;
      justify-content: left;
    }
    div.containerDireito {
      margin: 10px;
      margin-left: 5px;
      padding: 10px;
      width: 500px;
      display: inline-block;
      justify-content: left;
    }
    h2 {
      font-size: 16px;
      margin-top: 20px;
      margin-bottom: 10px;
      padding: 0px;
    }
    img.logotipo {
      width: 180px;
    }
    input.caixaPequena {
      margin: 0px;
      padding: 0px;
      width: 20px;
    }
    input.campoCurto {
      margin-bottom: 8px;
      padding: 3px;
      width: 30px;
      font-size: 12px;
    }
    input.campoMedio {
      margin-bottom: 4px;
      padding: 3px;
      width: 220px;
      font-size: 12px;
    }
    input.campoLongo {
      margin-bottom: 4px;
      padding: 3px;
      width: 95%;
      font-size: 12px;
    }
    label.textoPequeno {
      font-size: 10px;
    }
    label.textoGrande {
      font-size: 14px;
    }
    label.caracteristica {
      font-weight: bold;
    }
    button {
      margin: 2px;
      padding: 3px;
      font-size: 12px;
    }
    #result {
      margin: 10px;
      font-size: 18px;
      font-weight: bold;
      color: rgb(0, 60, 224);
    }
    table {
      margin: 0px;
      padding: 0px;
      text-align: left;
    }
  </style>
</head>
<body>

  <div class="container">

    <div class="containerEsquerdo">

      <img class="logotipo" src="src/img/logo-3det.png">

  <h2>Rolagem</h2>
  <div class="bloco" id="rolagem">

    <label class="textoGrande"><input type="radio" name="dados" value="1" checked>(1D) Normal</label>
    <label class="textoGrande"><input type="radio" name="dados" value="2">(2D) Ganho</label>
    <label class="textoGrande"><input type="radio" name="dados" value="3">(3D) Mais Ganho</label>
  </div>

  <div id="result"></div>

  <h2>Atributos</h2>

  <div class="bloco" id="atributos">
    <label class="caracteristica" for="poder">Poder</label>
    <input class="campoCurto" type="number" id="poder" value="0">
    <input class="campoCurto" type="number" id="poderCritico" value="6" min="1" max="6">
    <button onclick="rollDice('poder')">Testar (P)</button>
  </div>

  <div class="bloco" id="atributos">
    <label class="caracteristica" for="habilidade">Habilidade</label>
    <input class="campoCurto" type="number" id="habilidade" value="0">
    <input class="campoCurto" type="number" id="habilidadeCritico" value="6" min="1" max="6">
    <button onclick="rollDice('habilidade')">Testar (H)</button>
  </div>

  <div class="bloco" id="atributos">
    <label class="caracteristica" for="resistance">Resistência</label>
    <input class="campoCurto" type="number" id="resistance" value="0">
    <input class="campoCurto" type="number" id="resistanceCritico" value="6" min="1" max="6">
    <button onclick="rollDice('resistance')">Testar (R)</button>
  </div>

  <h2>Recursos</h2>

  <div class="bloco" id="recursos">
    <label class="caracteristica" for="action">Pontos de Ação:</label>
    <span id="paTotal">0</span>
    <input class="campoCurto" type="number" id="paAtual" value="0">
    <button onclick="debitarRecurso('paAtual')">Reduzir (PA)</button>
  </div>

  <div class="bloco" id="recursos">
    <label class="caracteristica" for="mana">Pontos de Mana:</label>
    <span id="pmTotal">0</span>
    <input class="campoCurto" type="number" id="pmAtual" value="0">
    <button onclick="debitarRecurso('pmAtual')">Reduzir (PM)</button>
  </div>

  <div class="bloco" id="recursos">
    <label class="caracteristica" for="life">Pontos de Vida:</label>
    <span id="pvTotal">0</span>
    <input class="campoCurto" type="number" id="pvAtual" value="0">
    <button onclick="debitarRecurso('pvAtual')">Reduzir (PV)</button>
  </div>

  <button onclick="descansoCurto()">Descanso Curto</button>
  <button onclick="descansoLongo()">Descanso Longo</button>

  <h2>Perícias</h2>

  <div class="bloco" id="pericias">
    <table class="bloco" id="pericias">
      <tr>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Animais">Animais</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Arte">Arte</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Esporte">Esporte</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Influência">Influência</label></td>
      </tr>
      <tr>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Luta">Luta</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Manha">Manha</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Máquinas">Máquinas</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Medicina">Medicina</label></td>
      </tr>
      <tr>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Mística">Mística</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Percepção">Percepção</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Saber">Saber</label></td>
        <td><label class="textoPequeno"><input type="checkbox" name="pericia" value="Sustento">Sustento</label></td>
      </tr>
    </table>
  </div>

</div>
<div class="containerDireito">

  <label class="caracteristica" for="nome">Nome</label>
  <input class="campoMedio" type="text" id="nome" name="nome"><br>

  <label class="caracteristica" for="nome">Arquétipo</label>
  <input class="campoMedio" type="text" id="arquetipo" name="arquetipo">
  
  <div id="nivel" class="bloco">
    <label class="caracteristica" for="xp">XP</label>
    <input class="caixaPequena" type="checkbox" id="xp1" name="xp" value="1">
    <input class="caixaPequena" type="checkbox" id="xp2" name="xp" value="2">
    <input class="caixaPequena" type="checkbox" id="xp3" name="xp" value="3">
    <input class="caixaPequena" type="checkbox" id="xp4" name="xp" value="4">
    <input class="caixaPequena" type="checkbox" id="xp5" name="xp" value="5">
    <input class="caixaPequena" type="checkbox" id="xp6" name="xp" value="6">
    <input class="caixaPequena" type="checkbox" id="xp7" name="xp" value="7">
    <input class="caixaPequena" type="checkbox" id="xp8" name="xp" value="8">
    <input class="caixaPequena" type="checkbox" id="xp9" name="xp" value="9">
    <input class="caixaPequena" type="checkbox" id="xp10" name="xp" value="10">
    <button onclick="desmarcarTodos('xp')">UPAR!</button>

    <label class="caracteristica" for="xp">Pontos</label>
    <input class="campoCurto" type="number" id="xpValor" value="10">
  </div>

  <h2>Vantagens</h2>
  <div id="vantagens" class="bloco">
    <input class="campoLongo" type="text" id="vantagem1" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem2" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem3" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem4" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem5" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem6" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem7" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem8" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem9" name="vantagem">
    <input class="campoLongo" type="text" id="vantagem10" name="vantagem">
  </div>

  <h2>Desvantagens</h2>
  <div id="desvantagens" class="bloco">
    <input class="campoLongo" type="text" id="desvantagem1" name="desvantagem">
    <input class="campoLongo" type="text" id="desvantagem2" name="desvantagem">
    <input class="campoLongo" type="text" id="desvantagem3" name="desvantagem">
    <input class="campoLongo" type="text" id="desvantagem4" name="desvantagem">
  </div>

  <h2>Técnicas</h2>
  <div id="tecnicas" class="bloco">
    <input class="campoLongo" type="text" id="tecnica1" name="tecnica">
    <input class="campoLongo" type="text" id="tecnica2" name="tecnica">
    <input class="campoLongo" type="text" id="tecnica3" name="tecnica">
    <input class="campoLongo" type="text" id="tecnica4" name="tecnica">
    <input class="campoLongo" type="text" id="tecnica5" name="tecnica">
    <input class="campoLongo" type="text" id="tecnica6" name="tecnica">
  </div>
  
</div>

</div>

    <script>
      // Função para rolar os dados
      function rollDice(field) {
        var numberOfDice = parseInt(document.querySelector('input[name="dados"]:checked').value);
        var bonus = parseInt(document.getElementById(field).value);
        var critico = parseInt(document.getElementById(field + "Critico").value);
        var total = 0;
        var rolls = [];

        for (var i = 0; i < numberOfDice; i++) {
          var roll = Math.floor(Math.random() * 6) + 1;
          rolls.push(roll);
          if (roll >= critico) {
            total += roll + bonus;
          } else {
            total += roll;
          }
        }

        var rollsText = rolls.join(', ');
        var result = "Rolagens: " + rollsText;
        result += " com Críticos: " + total;

        document.getElementById("result").innerHTML = result;
      }

      // Função para debitar recursos
      function debitarRecurso(field) {
        var valor = prompt("Digite o valor a ser debitado:");
        if (valor !== null) {
          var input = document.getElementById(field);
          var newValue = parseInt(input.value) - parseInt(valor);
          if (newValue < 0) {
            alert("O valor não pode ser menor que zero!");
          } else {
            input.value = newValue;
            updateLabels();
          }
        }
      }

      // Função para descanso curto
      function descansoCurto() {
        var pmInput = document.getElementById("pmAtual");
        var pvInput = document.getElementById("pvAtual");
        var habilidadeValue = parseInt(document.getElementById("habilidade").value);
        var resistanceValue = parseInt(document.getElementById("resistance").value);
        var maxhabilidade = parseInt(document.getElementById("habilidade").value) * 5;
        var maxResistance = parseInt(document.getElementById("resistance").value) * 5;
        var currentPm = parseInt(pmInput.value);
        var currentPv = parseInt(pvInput.value);
        var updatedPm = currentPm + habilidadeValue;
        var updatedPv = currentPv + resistanceValue;
        pmInput.value = updatedPm <= maxhabilidade ? updatedPm : maxhabilidade;
        pvInput.value = updatedPv <= maxResistance ? updatedPv : maxResistance;
        updateLabels();
      }

      // Função para descanso longo
      function descansoLongo() {
        var poderValue = parseInt(document.getElementById("poder").value);
        var habilidadeValue = parseInt(document.getElementById("habilidade").value);
        var resistanceValue = parseInt(document.getElementById("resistance").value);
        var macaixaPequenaoder = parseInt(document.getElementById("poder").value);
        var maxhabilidade = parseInt(document.getElementById("habilidade").value) * 5;
        var maxResistance = parseInt(document.getElementById("resistance").value) * 5;
        document.getElementById("paAtual").value = macaixaPequenaoder;
        document.getElementById("pmAtual").value = maxhabilidade;
        document.getElementById("pvAtual").value = maxResistance;
        updateLabels();
      }

      // Selecionando os elementos de input
      const poderInput = document.getElementById("poder");
      const habilidadeInput = document.getElementById("habilidade");
      const resistanceInput = document.getElementById("resistance");

      // Selecionando os elementos de rótulo
      const paTotalLabel = document.getElementById("paTotal");
      const paAtualLabel = document.getElementById("paAtual");
      const pmTotalLabel = document.getElementById("pmTotal");
      const pmAtualLabel = document.getElementById("pmAtual");
      const pvTotalLabel = document.getElementById("pvTotal");
      const pvAtualLabel = document.getElementById("pvAtual");

      // Função para atualizar os rótulos
      function updateLabels() {
        // Atualizando rótulos de Pontos de Ação
        paTotalLabel.textContent = poderInput.value;
        paAtualLabel.textContent = document.getElementById("paAtual").value;

        // Atualizando rótulos de Pontos de Mana
        pmTotalLabel.textContent = habilidadeInput.value * 5;
        pmAtualLabel.textContent = document.getElementById("pmAtual").value;

        // Atualizando rótulos de Pontos de Vida
        pvTotalLabel.textContent = resistanceInput.value * 5;
        pvAtualLabel.textContent = document.getElementById("pvAtual").value;
      }

      // Chamando a função inicialmente para configurar os rótulos corretamente
      updateLabels();

      // Adicionando event listeners para detectar alterações nos numeros numéricos
      poderInput.addEventListener("input", updateLabels);
      habilidadeInput.addEventListener("input", updateLabels);
      resistanceInput.addEventListener("input", updateLabels);

      function desmarcarTodos(groupName) {
        var checkboxes = document.getElementsByName(groupName);
        checkboxes.forEach(function(checkbox) {
          checkbox.checked = false;
        });
      }
    </script>

  </body>
</html>